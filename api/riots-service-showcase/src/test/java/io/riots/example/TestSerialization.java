package io.riots.example;

import io.riots.core.model.Device;
import io.riots.core.model.DeviceType;
import io.riots.core.model.Property;
import io.riots.core.model.sim.PropertySimulation;
import io.riots.core.model.sim.Simulation;

import org.junit.Test;

public class TestSerialization {

	@Test
	public void testSimulation() throws Exception {

		com.fasterxml.jackson.databind.ObjectMapper mapper = new com.fasterxml.jackson.databind.ObjectMapper();

		System.out.println(mapper.readValue("{\"name\":\"unnamed\",\"baseType\":\"STRING\"}",Property.class));

		String value = "{\"id\":\"53e885a5c0260d6feabe015c\",\"name\":\"Light Sensor 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"LONG\",\"id\":0,\"name\":\"light_intensity\",\"description\":null,\"properties\":{},\"metadata\":null,\"constraints\":null,\"valueDomain\":null},{\"baseType\":\"STRING\",\"id\":1,\"name\":\"mode\",\"description\":null,\"properties\":{},\"metadata\":null,\"constraints\":null,\"valueDomain\":{\"type\":\"Enumerated\",\"values\":[\"mode1\",\"mode2\"],\"domainSize\":2}},{\"baseType\":\"STRING\",\"id\":2,\"name\":\"temperature\",\"description\":null,\"properties\":{},\"metadata\":null,\"constraints\":null,\"valueDomain\":{\"type\":\"Discrete\",\"min\":\"-20\",\"max\":\"50\",\"step\":\"0.01\"}}]}";

		System.out.println(mapper.readValue(value, DeviceType.class));

		value = "{\"type\": \"RANDOM\", "
				//+ "\"stepInterval\": 1, "
				+ "\"minValue\": 10, \"maxValue\": 20}, \"startTime\": 0, \"endTime\": 10}";
		PropertySimulation r1 = mapper.readValue(value, PropertySimulation.class);
		System.out.println(r1);

		value = "{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},"
				+ "\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":["
				+ "{\"baseType\":\"STRING\",\"id\":0,\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},"
					+ "\"metadata\":{\"sensable\":null,\"actuatable\":null,\"semanticType\":null},\"constraints\":null,"
					+ "\"valueDomain\":{\"type\":\"Continuous\",\"min\":\"0\",\"max\":\"5\"},\"subTypes\":[]},"
				+ "{\"baseType\":\"STRING\",\"id\":1,\"name\":\"unnamed 2\",\"description\":null,\"properties\":{},"
					+ "\"metadata\":{\"sensable\":null,\"actuatable\":null,\"semanticType\":null},\"constraints\":null,"
					+ "\"valueDomain\":{\"type\":\"Continuous\",\"min\":\"1\",\"max\":\"10\"},\"subTypes\":[]},"
				+ "{\"baseType\":\"LIST\",\"id\":2,\"name\":\"unnamed\",\"description\":null,\"properties\":{},"
					+ "\"metadata\":{\"sensable\":null,\"actuatable\":null,\"semanticType\":null},\"constraints\":null,"
					+ "\"subTypes\":[]}]}";
		value = "{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"STRING\",\"id\":0,\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":{\"type\":\"Continuous\",\"min\":\"0\",\"max\":\"5\"}},{\"baseType\":\"STRING\",\"id\":1,\"name\":\"unnamed 2\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null,\"semanticType\":null},\"constraints\":null,\"valueDomain\":{\"type\":\"Enumerated\",\"min\":\"1\",\"max\":\"10\",\"values\":[\"1\"]}},{\"baseType\":\"LIST\",\"id\":2,\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null,\"semanticType\":null},\"constraints\":null,\"valueDomain\":null}]}";
		value = "{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"STRING\",\"id\":0,\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":{\"type\":\"Enumerated\",\"min\":\"0\",\"max\":\"5\",\"values\":[\"1\"]}},{\"baseType\":\"STRING\",\"id\":1,\"name\":\"unnamed 2\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null,\"semanticType\":null},\"constraints\":null,\"valueDomain\":{\"type\":\"Continuous\",\"min\":\"1\",\"max\":\"10\"}},{\"baseType\":\"LIST\",\"id\":2,\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null,\"semanticType\":null},\"constraints\":null,\"valueDomain\":null}]}";
		value = "{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"STRING\",\"id\":0,\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":{\"type\":\"Continuous\",\"min\":\"0\",\"max\":\"5\"}},null,{\"baseType\":\"LIST\",\"id\":2,\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[{\"baseType\":\"STRING\",\"id\":1,\"name\":\"unnamed 2\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":{\"type\":\"Enumerated\",\"values\":[\"1\"]}}],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null}]}";
		DeviceType dt1 = mapper.readValue(value, DeviceType.class);
		System.out.println(dt1);
		
		value = "{\"id\":\"5415c0e8c026f000c784faec\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"assetType\":{\"id\":\"5414c5a0c026926e3bdec66e\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[]},\"location\":{\"latitude\":48.197318347542044,\"longitude\":16.368480920791626},\"deviceType\":{\"id\":\"5414c5a0c026926e3bdec66e\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[]}}";
		Device d1 = mapper.readValue(value, Device.class);
		System.out.println(d1);

		value = "{\"id\":\"5415da2bc02683f7c1770568\",\"name\":\"scenario3\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"devices\":[{\"type\":\"GROUP\",\"id\":\"0407818e-6669-4fb8-aba0-2fb323cec461\",\"name\":\"foo\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"deviceType\":{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"LIST\",\"id\":\"5414fbcbc0266d9693092e74\",\"name\":\"location\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[{\"baseType\":\"DOUBLE\",\"id\":\"5415097ec0266d9693092e81\",\"name\":\"lon\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LON\"},{\"baseType\":\"DOUBLE\",\"id\":\"54150e6ac0266d9693092e83\",\"name\":\"lat\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LAT\"}],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION\"},{\"baseType\":\"STRING\",\"id\":\"5414ff61c0266d9693092e76\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"__NONE__\"}]},\"numInstances\":10},{\"type\":\"GROUP\",\"id\":\"0d4a28e4-29b7-4bc5-9388-d06b488eed28\",\"name\":\"bar\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"deviceType\":{\"id\":\"5414c5a0c026926e3bdec66e\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[]},\"numInstances\":0}],\"simulationProperties\":[],\"constraints\":[{\"type\":\"EXPRESSION\",\"expression\":\"\"}]}";
		value = "{\"id\":\"541782f8c0265048194bdd37\",\"name\":\"Unnamed Scenario\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"devices\":[{\"type\":\"GROUP\",\"id\":\"541782fac0265048194bdd38\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"deviceType\":{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"LIST\",\"id\":\"5414fbcbc0266d9693092e74\",\"name\":\"location\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[{\"baseType\":\"DOUBLE\",\"id\":\"5415097ec0266d9693092e81\",\"name\":\"lon\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LON\"},{\"baseType\":\"DOUBLE\",\"id\":\"54150e6ac0266d9693092e83\",\"name\":\"lat\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LAT\"}],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION\"},{\"baseType\":\"STRING\",\"id\":\"5414ff61c0266d9693092e76\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"__NONE__\"}]},\"numInstances\":0}],\"simulationProperties\":[{\"type\":\"RANDOM\",\"id\":\"54178304c0265048194bdd39\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"property\":null,\"device\":{\"type\":\"GROUP\",\"id\":\"541782fac0265048194bdd38\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"deviceType\":{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"LIST\",\"id\":\"5414fbcbc0266d9693092e74\",\"name\":\"location\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[{\"baseType\":\"DOUBLE\",\"id\":\"5415097ec0266d9693092e81\",\"name\":\"lon\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LON\"},{\"baseType\":\"DOUBLE\",\"id\":\"54150e6ac0266d9693092e83\",\"name\":\"lat\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LAT\"}],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION\"},{\"baseType\":\"STRING\",\"id\":\"5414ff61c0266d9693092e76\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"__NONE__\"}]},\"numInstances\":0},\"startTime\":0,\"endTime\":0,\"stepInterval\":0.1,\"minValue\":0,\"maxValue\":1},{\"type\":\"RANDOM\",\"id\":\"5418021bc0261c5a96f3f8e2\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"property\":null,\"device\":null,\"startTime\":0,\"endTime\":0,\"stepInterval\":0.1,\"minValue\":0,\"maxValue\":1}],\"constraints\":[{\"type\":\"BUILDER\",\"id\":\"0\",\"name\":null,\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"expression\":\"foo\",\"lhs\":{\"type\":\"RANDOM\",\"id\":\"54178304c0265048194bdd39\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"property\":null,\"device\":{\"type\":\"GROUP\",\"id\":\"541782fac0265048194bdd38\",\"name\":\"unnamed\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"deviceType\":{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"LIST\",\"id\":\"5414fbcbc0266d9693092e74\",\"name\":\"location\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[{\"baseType\":\"DOUBLE\",\"id\":\"5415097ec0266d9693092e81\",\"name\":\"lon\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LON\"},{\"baseType\":\"DOUBLE\",\"id\":\"54150e6ac0266d9693092e83\",\"name\":\"lat\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION_LAT\"}],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"LOCATION\"},{\"baseType\":\"STRING\",\"id\":\"5414ff61c0266d9693092e76\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null,\"semanticType\":\"__NONE__\"}]},\"numInstances\":0},\"startTime\":0,\"endTime\":0,\"stepInterval\":0.1,\"minValue\":0,\"maxValue\":1}}]}";
		value = "{\"id\":\"541782f8c0265048194bdd37\",\"name\":\"Unnamed Scenario\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"devices\":[{\"type\":\"GROUP\",\"id\":\"541782fac0265048194bdd38\",\"name\":\"dev1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"deviceType\":{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"LIST\",\"id\":\"5414fbcbc0266d9693092e74\",\"name\":\"location\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[{\"baseType\":\"DOUBLE\",\"id\":\"5415097ec0266d9693092e81\",\"name\":\"lon\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null},{\"baseType\":\"DOUBLE\",\"id\":\"54150e6ac0266d9693092e83\",\"name\":\"lat\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null}],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null},{\"baseType\":\"STRING\",\"id\":\"5414ff61c0266d9693092e76\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null}]},\"numInstances\":0}],\"simulationProperties\":[{\"type\":\"RANDOM\",\"id\":\"54178304c0265048194bdd39\",\"name\":\"p1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"property\":null,\"device\":{\"type\":\"GROUP\",\"id\":\"541782fac0265048194bdd38\",\"name\":\"dev1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"deviceType\":{\"id\":\"5414b9aac026926e3bdec66d\",\"name\":\"unnamed 1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"manufacturer\":null,\"type\":null,\"deviceProperties\":[{\"baseType\":\"LIST\",\"id\":\"5414fbcbc0266d9693092e74\",\"name\":\"location\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[{\"baseType\":\"DOUBLE\",\"id\":\"5415097ec0266d9693092e81\",\"name\":\"lon\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null},{\"baseType\":\"DOUBLE\",\"id\":\"54150e6ac0266d9693092e83\",\"name\":\"lat\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null}],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null},{\"baseType\":\"STRING\",\"id\":\"5414ff61c0266d9693092e76\",\"name\":\"t1\",\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"children\":[],\"metadata\":{\"sensable\":null,\"actuatable\":null},\"constraints\":null,\"valueDomain\":null}]},\"numInstances\":0},\"startTime\":0,\"endTime\":0,\"stepInterval\":0.1,\"minValue\":0,\"maxValue\":1}],\"constraints\":[{\"type\":\"EXPRESSION\",\"id\":\"0\",\"name\":null,\"description\":null,\"properties\":{},\"created\":null,\"creator\":null,\"expression\":\"foo\"},{\"type\":\"BUILDER\",\"id\":1,\"name\":null,\"description\":null,\"properties\":{},\"created\":null,\"creator\":null}]}";
		Simulation s1 = mapper.readValue(value, Simulation.class);
		System.out.println(s1);
	}

}
