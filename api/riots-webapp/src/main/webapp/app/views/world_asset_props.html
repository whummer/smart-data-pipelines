<section ng-controller="AssetPropsController" id="assetPropsContainer" style="height: 100%">

	<div>
		<table ng-show="shared.selectedAsset">
			<tr><td>ID:</td>
				<td>
					<input class="form-control input-sm" ng-model="shared.selectedAsset.id" disabled="disabled" />
				</td>
			</tr><tr>
				<td>Name:</td>
				<td>
					<input class="form-control input-sm" ng-model="shared.selectedAsset.name" />
				</td>
			</tr><tr>
				<td>Asset Type:</td>
				<td>
					<select id="selAssetType" class="form-control input-sm"
						ng-options="opt.name for opt in assetTypes track by opt.id"
						ng-model="shared.selectedAsset.assetType">
					</select>
				</td>
			</tr><tr>
				<td>Geometry:</td>
				<td>
					<select id="selAssetGeometry" class="form-control input-sm"
						ng-model="shared.selectedAsset.geometry">
						<option value="box">Box/Cube</span>
						<option value="person">Person</span>
					</select>
				</td>
			</tr><tr>
				<td>Location (lat,lon,alt):</td>
				<td>
					<input class="form-control input-sm" style="width: 70px" ng-model="shared.selectedAsset.location.latitude" />,
					<input class="form-control input-sm" style="width: 70px" ng-model="shared.selectedAsset.location.longitude" />,
					<input class="form-control input-sm" style="width: 70px" ng-model="shared.selectedAsset.location.altitude" />
				</td>
			</tr>
			<!--
			<tr>
				<td>Creator:</td>
				<td>{{shared.selectedAsset.creator.name}}</td>
			</tr><tr>
				<td>Properties:</td>
				<td>{{shared.selectedAsset.properties}}</td>
			</tr><tr>
				<td>Tags:</td>
				<td>{{shared.selectedAsset.tags}}</td>
			</tr>
			-->
			<tr><td></td>
				<td>
					<button class="btn btn-default btn-sm btn-primary" data-dojo-props="iconClass:'icon-save'" id="btnSaveDeviceDetails">Save</button>
			</td></tr>
		</table>
	</div>
	
</section>


<script type="text/javascript">

	var app = angular.module("app");
	app.controller('AssetPropsController', [
		'$scope', '$http', '$compile',
		function($scope, $http, $compile) {

			AppController($scope, $http, $compile);

			$scope.saveDeviceDetails = function() {
				var asset = $scope.shared.selectedAsset;
				$scope.updateAssetInDB(asset, function(asset) {
	    			var event = {changedItem: $scope.shared.selectedAsset}
					eventBus.publish("addOrDel.Asset", event);
				});
			};

			$scope.loadAssetTypes = function() {
				invokeGET($scope.http, $scope.deviceTypesAPI,
					function(data, status, headers, config) {
						$scope.assetTypes = data.result;
						//fillDojoSelectValues($scope.registry.byId("selAssetType"), data.result);
					}
				);
			}

			/* add event handlers*/
			$scope.addClickHandler("btnSaveDeviceDetails", $scope.saveDeviceDetails);

			/* start rendering the main container */
			$scope.loadAssetTypes();
			
		}
	]);

</script>