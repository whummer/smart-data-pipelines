<section ng-controller="ThingPropsController" id="assetPropsContainer"
	style="height: 100%">

	<div ng-show="shared.selectedThing">

		<!-- ID -->
		<div class="form-group">
			<label for="inputId" class="col-sm-3 control-label">ID:</label>
			<div class="col-sm-9">
				<input id="inputId" class="form-control input-sm"
					ng-model="shared.selectedThing.id" disabled="disabled" />
			</div>
		</div>

		<!-- name -->
		<div class="form-group">
			<label for="inputName" class="col-sm-3 control-label">Name:</label>
			<div class="col-sm-9">
				<input id="inputName" class="form-control input-sm"
					ng-model="shared.selectedThing.name" />
			</div>
		</div>

		<!-- type -->
		<div class="form-group">
			<label for="inputType" class="col-sm-3 control-label">Thing
				Type:</label>
			<div class="col-sm-9">
				<select id="inputType" class="form-control input-sm"
					ng-options="opt.name for opt in thingTypes track by opt.id"
					ng-model="shared.selectedThing['thing-type']">
				</select>
			</div>
		</div>

		<!-- type -->
		<div class="form-group" ng-show="shared.selectedThing[CREATION_DATE]">
			<label for="inputType" class="col-sm-3 control-label">Creation
				Date:</label>
			<div class="col-sm-9">
				{{formatTime(shared.selectedThing[CREATION_DATE])}}</div>
		</div>

		<!-- save -->
		<div class="form-group">
			<label for="btnSave" class="col-sm-3 control-label"></label>
			<div class="col-sm-9">
				<button class="btn btn-default btn-sm btn-primary" id="btnSave">Save</button>
			</div>
		</div>

		<!--
		<table>
			<tr>
				<td>Geometry:</td>
				<td>
					<select id="selThingGeometry" class="form-control input-sm"
						ng-model="shared.selectedThing.geometry">
						<option value="box">Box/Cube</span>
						<option value="person">Person</span>
					</select>
				</td>
			</tr>
			<tr>
				<td>Location (lat,lon,alt):</td>
				<td>
					<input class="form-control input-sm" style="width: 70px" ng-model="shared.selectedThing.location.latitude" />,
					<input class="form-control input-sm" style="width: 70px" ng-model="shared.selectedThing.location.longitude" />,
					<input class="form-control input-sm" style="width: 70px" ng-model="shared.selectedThing.location.altitude" />
				</td>
			</tr>
			<tr>
				<td>Creator:</td>
				<td>{{shared.selectedThing.creator.name}}</td>
			</tr><tr>
				<td>Properties:</td>
				<td>{{shared.selectedThing.properties}}</td>
			</tr><tr>
				<td>Tags:</td>
				<td>{{shared.selectedThing.tags}}</td>
			</tr>
		</table>
			-->
	</div>

</section>


<script type="text/javascript">
	var app = angular.module("app");
	app.controller('ThingPropsController', [
			'$scope',
			'$http',
			'$compile',
			function($scope, $http, $compile) {

				AppController($scope, $http, $compile);
				$scope.CREATION_DATE = CREATION_DATE;

				$scope.saveThingDetails = function() {
					var thing = $scope.shared.selectedThing;
					thing = clone(thing);
					if (thing["thing-type"]) {
						thing["thing-type"] = thing["thing-type"].id;
					}
					$scope.updateThingInDB(thing, function(thing) {
						var event = {
							changedItem : $scope.shared.selectedThing
						}
						eventBus.publish("addOrDel.Asset", event);
					});
				};

				$scope.loadThingTypes = function() {
					invokeGET($scope.http, $scope.thingTypesAPI, function(data,
							status, headers, config) {
						$scope.thingTypes = data.result;
					});
				}

				/* add event handlers*/
				$scope.addClickHandler("btnSave",
						$scope.saveThingDetails);

				/* start rendering the main container */
				$scope.loadThingTypes();

			} ]);
</script>