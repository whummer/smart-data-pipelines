<section ng-controller="AppsController">
  <div>

    <div ng-show="shared.selectedApplication">

      <form class="form-horizontal" role="form" style="text-align: left">

        <!-- app name -->
        <div class="form-group">
          <label for="inputAppName" class="col-sm-3 control-label">Name</label>

          <div class="col-sm-9">
            <input id="inputAppName" class="form-control input-sm" ng-model="shared.selectedApplication.name"/>
          </div>
        </div>

        <!-- creation date -->
        <div class="form-group" ng-show="shared.selectedApplication[CREATION_DATE]">
          <label for="created" class="col-sm-3 control-label">Created</label>

          <div class="col-sm-9">
            <input id="created" class="form-control input-sm" type="text" disabled="disabled" value="{{formatTime(shared.selectedApplication[CREATION_DATE])}}"/>
          </div>
        </div>

        <!-- app key -->
        <div class="form-group">
          <label for="inputAppKey" class="col-sm-3 control-label">App Key</label>

          <div class="col-sm-9">
            <div class="input-group">
            <input id="inputAppKey" class="form-control input-sm" ng-model="shared.selectedApplication.appKey" disabled="disabled"/>
            <div class="input-group-addon">
              <a id="copyApiKeyToClipboard" href="JavaScript:void(0)" data-container="body" data-toggle="popover" data-trigger="focus" data-placement="right"
                 data-content="Your API key has been copied to your clipboard. Go ahead and do something with it"
                 title="API key copied" ><span class="glyphicon glyphicon-paperclip"></span></a>
            </div>
            </div>
          </div>
        </div>

        <!-- JS -->
       <!-- <div class="form-group">
          <label class="col-sm-3 control-label">JavaScript Code</label>

          <div class="col-sm-9">
<pre>window.RIOTS_USER_ID =
  "{{userInfo.id}}"
window.RIOTS_APP_KEY =
  "{{shared.selectedApplication.appKey}}"
</pre>
          </div>
        </div>-->

        <!-- save -->
        <div class="form-group">
          <label class="col-sm-3 control-label"></label>

          <div class="col-sm-9">
            <button class="btn btn-primary btn-sm pull-right"  id="btnSaveApp"><span class="glyphicon glyphicon-ok"></span> Update Application</button>
          </div>
        </div>
      </form>

    </div>
  </div>
</section>

<script type="text/javascript">

  var app = angular.module("app");
  app.controller('AppsController', function ($scope, $http, $compile, $routeParams, $log, $location) {
    AppController($scope, $http, $compile);

    $scope.CREATION_DATE = CREATION_DATE;


    var saveApp = function () {
      var app = clone($scope.shared.selectedApplication);
      delete app["$$hashKey"];
      riots.save.app(app);
    };

    /* add event listeners */
    $scope.addClickHandler("btnSaveApp", saveApp);

    $('#copyApiKeyToClipboard').popover()

  });

</script>
