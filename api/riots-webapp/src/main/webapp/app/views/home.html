<section ng-controller="HomeViewController" id="homeViewDiv" class="wrapper wrapper-content">

	<div class="row">
		<div ng-repeat="n in range(0, userConfig.dashboardElements.length - 1)">

			<div class="row" ng-if="!userConfig.dashboardElements[n].widgetType.indexOf('dashboard_stats') ">
				<ng-include
						src="appConfig['appRootPath'] + '/views/dashboard_' + userConfig.dashboardElements[n].widgetType + '.html'"></ng-include>
			</div>

			<ng-include ng-if="userConfig.dashboardElements[n].widgetType.indexOf('dashboard_stats')"
									src="appConfig['appRootPath'] + '/views/dashboard_' + userConfig.dashboardElements[n].widgetType + '.html'"></ng-include>

		</div>
	</div>

	<div class="jumbotron" ng-show="!userConfig.dashboardElements.length">
		<div>
			<h3>Hi {{authInfo.name.split(' ')[0]}}</h3>
			<p>It looks like you have not yet configured your dashboard. You may try adding some widgets to this page.</p>
		</div>
	</div>

	<div>
		<p>
			<a class="btn btn-primary " href="#" data-toggle="modal"
				 data-target="#addWidgetModal"
				 role="button">
				<span class="glyphicon glyphicon-plus-sign" style="margin-right: 10px"></span> Add Widgets
			</a>

			<a class="btn btn-warning " href="#"
				 ng-show="userConfig.dashboardElements.length"
				 ng-click="removeAllWidgets()" role="button">
				<span class="glyphicon glyphicon-minus-sign" style="margin-right: 10px"></span> Remove All Widgets
			</a>
		</p>
	</div>

	<div class="modal fade" id="addWidgetModal" tabindex="-1" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">
						<span aria-hidden="true">&times;</span>
						<span class="sr-only">Close</span>
					</button>
					<h3 class="modal-title">Add a Widget to your Dashboard</h3>
				</div>

				<div class="modal-body row">
					<div class="col-md-6">
						<div class="media" style="cursor: pointer;"
								 ng-class="selectedWidget == 'stats_catalog' ? 'well media' : 'well-flat media'">
							<div class="media-body" ng-click="selectedWidget = 'stats_catalog'">
								<i class="fa fa-list fa-2x"></i>
								<h4 class="media-heading">Catalog Statistics</h4>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="media" style="cursor: pointer;"
								 ng-class="selectedWidget == 'stats_user' ? 'well media' : 'well-flat media'">
							<div class="media-body" ng-click="selectedWidget = 'stats_user'">
								<i class="fa fa-group fa-2x"></i>
								<h4 class="media-heading">User Statistics</h4>
							</div>
						</div>
					</div>
				</div>

				<div class="modal-body row">
					<div class="col-md-6">
						<div class="media" style="cursor: pointer;"
								 ng-class="selectedWidget == 'stats_application' ? 'well media' : 'well-flat media'">
							<div class="media-body" ng-click="selectedWidget = 'stats_application'">
								<i class="fa fa-cogs fa-2x"></i>
								<h4 class="media-heading">Application Statistics</h4>
							</div>
						</div>
					</div>

					<div class="col-md-6">
						<div class="media" style="cursor: pointer;"
								 ng-class="selectedWidget == 'map' ? 'well media' : 'well-flat media'">
							<div class="media-body" ng-click="selectedWidget = 'map'">
								<i class="fa fa-globe fa-2x"></i>
								<h4 class="media-heading">Thing Distribution</h4>
							</div>
						</div>
					</div>
				</div>

				<div class="modal-body row">
					<div class="col-md-6">
						<div class="media" style="cursor: pointer;"
								 ng-class="selectedWidget == 'history' ? 'well media' : 'well-flat media'">
							<div class="media-body" ng-click="selectedWidget = 'history'">
								<i class="fa fa-bar-chart-o fa-2x"></i>
								<h4 class="media-heading">Data Usage Overview</h4>
							</div>
						</div>
					</div>

					<!-- <div class="col-md-6">
							<div class="media" ng-class="selectedWidget == 'map' ? 'well media' : 'well-flat media'">
								<div class="media-body" ng-click="selectedWidget = 'map'">
									<h4 class="media-heading">Thing Distribution</h4>
								</div>
							</div>
						</div>-->
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="addWidget()">
						<span class="fa fa-plus" style="margin-right: 10px"></span>Add Widget
					</button>
				</div>
			</div>
		</div>
	</div>

</section>
