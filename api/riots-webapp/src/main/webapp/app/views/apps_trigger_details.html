<section ng-controller="TriggerDetailsController">
	<div ng-show="shared.selectedTrigger" style="height: 100%">

		<!-- type -->
		<div class="form-group">
			<label for="inputId" class="col-sm-3 control-label">ID:</label>
			<div class="col-sm-9">
				<input id="inputId" class="form-control input-sm" disabled="disabled"
					ng-model="shared.selectedTrigger.id" />
			</div>
		</div>

		<!-- created -->
		<div class="form-group">
			<label for="inputDate" class="col-sm-3 control-label">Creation
				Date:</label>
			<div class="col-sm-9">
				<div class="input-sm">{{formatTime(shared.selectedTrigger[CREATION_DATE])}}</div>
			</div>
		</div>

		<!-- type -->
		<div class="form-group">
			<label for="inputType" class="col-sm-3 control-label">Trigger
				Type:</label>
			<div class="col-sm-9">
				<select id="inputType" class="form-control input-sm"
					ng-model="shared.selectedTrigger.type">
					<option value="UNDEFINED"> -- Undefined -- </option>
					<option value="GEO_FENCE">Geo Fence</option>
				</select>
			</div>
		</div>

		<!-- Geo Fence Details -->
		<div ng-show="shared.selectedTrigger.type == 'GEO_FENCE'">
			<div class="form-group">
				<label for="inputType" class="col-sm-3 control-label">Center
					(lat/lng):</label>
				<div class="col-sm-9">
					<table>
						<tr><td>
					<input class="form-control input-sm" ng-model="shared.selectedTrigger.center.latitude"/>
						</td><td>
						,
						</td><td>
					<input class="form-control input-sm" ng-model="shared.selectedTrigger.center.longitude"/>
						</td></tr>
					</table>
				</div>
			</div>
		</div>

		<!-- save -->
		<div class="form-group">
			<label for="btnSave" class="col-sm-3 control-label"></label>
			<div class="col-sm-9">
				<button class="btn btn-default btn-sm btn-primary" id="btnSaveTrigger">Save</button>
			</div>
		</div>

	</div>
</section>
<script type="text/javascript">
var app = angular.module("app");
app.controller('TriggerDetailsController', [ '$scope', '$http', '$compile',
	function($scope, $http, $compile) {

		AppController($scope, $http, $compile);

		var saveTrigger = function() {
			var item = clone($scope.shared.selectedTrigger);
			delete item["$$hashKey"];
			riots.save.trigger(item, function() {
				console.log("trigger saved");
			});
		}

		/* register event handlers */
        $scope.addClickHandler("btnSaveTrigger", saveTrigger);
	}
]);
</script>
