<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="demo">
<head>

	<!--
	  - STYLE SHEETS
	  -->

	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css"/>
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css"/>

	<!-- Font awesome -->
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

	<!-- FancyBox -->
	<link href="/styles/ext/plugins/fancybox/jquery.fancybox.css" rel="stylesheet">

	<!-- Chosen Plugin -->
	<link href="/styles/ext/plugins/chosen/chosen.css" rel="stylesheet">

	<!-- Dropzone style -->
	<link href="/styles/ext/plugins/dropzone/basic.css" rel="stylesheet">
	<link href="/styles/ext/plugins/dropzone/dropzone.css" rel="stylesheet">

	<!-- noUiSlider for Range Slider-->
	<link href="/styles/ext/plugins/nouslider/jquery.nouislider.css" rel="stylesheet">

	<!-- DataPicker -->
	<link href="/styles/ext/plugins/datapicker/angular-datapicker.css" rel="stylesheet">

	<!-- Ion Range Slider -->
	<link href="/styles/ext/plugins/ionRangeSlider/ion.rangeSlider.css" rel="stylesheet">
	<link href="/styles/ext/plugins/ionRangeSlider/ion.rangeSlider.skinFlat.css" rel="stylesheet">

	<!-- ui Tree -->
	<link href="/styles/ext/plugins/uiTree/angular-ui-tree.min.css" rel="stylesheet">

	<!-- iCheck -->
	<link href="/styles/ext/plugins/iCheck/custom.css" rel="stylesheet">

	<!-- colorpicker -->
	<link href="/styles/ext/plugins/colorpicker/colorpicker.css" rel="stylesheet">

	<!-- Main Inspinia CSS files -->
	<link href="animate.css" rel="stylesheet">
	<link href="style.css" rel="stylesheet">

	<!-- demo css -->
	<link rel="stylesheet" href="demo.css"/>

	<!--
		- JAVA SCRIPT STUFF
		-->

	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular.js"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>

	<!-- riots API dependencies -->
	<script type="application/javascript" src="/scripts/ext/jsKnob/angular-knob.js"></script>
	<script type="application/javascript" src="/scripts/ext/jsKnob/jquery.knob.js"></script>
	<script type="application/javascript" src="/scripts/ext/colorpicker/bootstrap-colorpicker-module.js"></script>
	<script type="text/javascript" src="/demo/golfcars/main.js"></script>

	<script>
		window.RIOTS_USER_ID = "54cfa5b0bee88c0d9b4d157a"
		window.RIOTS_APP_KEY = "da022e9f-4a5b-4a6b-b2d6-9d1e199447c4"
	</script>


	<script type="text/javascript" src="/config.js"></script>
	<script type="text/javascript" src="/scripts/modules/service-calls.js"></script>
	<script type="text/javascript" src="/api/riots-api.js"></script>

	<title>Demo - Porsche Fleet Management</title>
</head>

<body style="background-color: #eeeeee">

<div class="container" ng-controller="MainCtrl">

	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-content">
				<div class="text-center" style="margin-bottom: 40px">
					<img src="/demo/golfcars/porsche-holding.png" class="center-block img-responsive" alt=""/>
				</div>
			</div>
		</div>
	</div>

	<div class="col-lg-6">
		<div class="ibox float-e-margins">
			<div class="ibox-title">
				<strong>riots Configuration</strong>
			</div>
			<div class="ibox-content">
				<form class="form-horizontal">
					<div class="form-group">
						<label for="riotsUserId" class="control-label col-sm-3">riots UserId</label>
						<div class="col-sm-9">
							<input id="riotsUserId" ng-model="RIOTS_USER_ID" class="input-sm form-control"/>
						</div>
					</div>
					<div class="form-group">
						<label for="riotsAppKey" class="control-label col-sm-3">riots AppKey</label>
						<div class="col-sm-9">
							<input id="riotsAppKey" ng-model="RIOTS_APP_KEY" class="form-control input-sm"/>
						</div>
					</div>
					<div class="clearfix">
						<button class="pull-right btn btn-sm btn-primary" ng-click="loadThings()">Reload Configuration</button>
					</div>
				</form>
			</div>
		</div>
	</div>


	<!-- ACTIVE CARS -->
	<div class="col-lg-12">
		<div class="ibox float-e-margins">
			<div class="ibox-title"><strong>Active Cars</strong></div>
			<div class="ibox-content">
				<table class="table table-bordered table-hover">
					<thead><tr>
						<th>Image</th>
						<th>ID</th>
						<th>Name</th>
						<th>Location</th>
						<th>Battery Level</th>
						<th>Remaining Mileage</th>
						<th>Tire Pressure</th>
						<th>Speed</th>
						<th>Within Geo Fence</th>
					</tr></thead>
					<tr ng-repeat="thing in things">
						<td><img ng-src="{{thing.img}}" style="height: 30px;"/></td>
						<td>{{thing.id}}</td>
						<td><b>{{thing.name}}</b></td>
						<td>{{thing.properties['location.latitude']}},{{thing.properties['location.longitude']}}</td>
						<td>{{thing.properties.batteryPercent}} %</td>
						<td>{{thing.properties.mileageRemaining}} m</td>
						<td>{{thing.properties.pressure}} %</td>
						<td>{{thing.properties.speed}} m/s</td>
						<td>{{thing.properties.isInCurrentGeoFence}}</td>
					</tr>
				</table>
			</div>
		</div>
	</div>


	<!-- ACTIVE CARS -->
	<div class="col-lg-6 col-md-12 col-sm-12" ng-repeat="thing in things">
		<div class="ibox float-e-margins">
			<div class="ibox-title"><span class="fa fa-car"></span> <strong>{{thing.name}}</strong></div>
			<div class="ibox-content">

				<div class="row">

					<div class="col-sm-12 col-xs-12">
						<div id="{{thing.id + '_map'}}" style="height: 300px;"></div>
					</div>
				</div>

				<div class="row" style="margin-top: 15px">
					<div class="col-sm-12 col-xs-12 text-center">
						<div class="col-sm-4">
							<knob id="{{thing.id + '_speed'}}"
										knob-data="{{thing.properties.speed}}" class="m-r-sm" data-skin="tron"
										data-fgColor="#1AB394"
										data-width="85"
										data-height="85"
										data-thickness="0.1"
										data-max="260"
										data-angleOffset=-125
										data-angleArc=250
										knob-options=""></knob>

						</div>
						<div class="col-sm-4 text-center" >
							<knob id="{{thing.id + '_fuel'}}"
										knob-data="{{thing.properties.fuelLevel}}" class="m-r-sm" data-skin="tron"
										data-fgColor="#00AC23"
										data-width="85"
										data-height="85"
										data-thickness="0.1"
										data-angleOffset=-125 data-angleArc=250
										knob-options=""></knob>
						</div>
						<div class="col-sm-4 text-center">
							<knob
									id="{{thing.id + '_milage'}}"
									knob-data="{{car.properties.remainingMilage}}" class="m-r-sm" data-skin="tron"
									data-fgColor="#00AC23"
									data-width="85"
									data-height="85"
									data-thickness="0.1"
									data-readOnly="true"
									data-max="{{car.milage}}"
									data-angleOffset=-125 data-angleArc=250
									knob-options=""></knob>
						</div>

					</div>

					<div class="row">
						<div class="col-sm-4 col-xs-4 text-center"><strong>Speed</strong></div>
						<div class="col-sm-4 col-xs-4 text-center"><strong>Fuel Level</strong></div>
						<div class="col-sm-4 col-xs-4 text-center"><strong>Remaining Milage</strong></div>
					</div>

				</div>
			</div>
		</div>
	</div><!--<div class="col-lg-6 col-md-12 col-sm-12" ng-repeat="car in activeCars">
		<div class="ibox float-e-margins">
			<div class="ibox-title"><span class="fa fa-car"></span> <strong>{{car.name}}</strong></div>
			<div class="ibox-content">

				<div class="row">

					<div class="col-sm-12 col-xs-12">
						<div id="{{car.id + '_map'}}" style="height: 300px;"></div>
					</div>
				</div>

				<div class="row" style="margin-top: 15px">
					<div class="col-sm-12 col-xs-12 text-center">
						<div class="col-sm-4">
							<knob id="{{car.id + '_speed'}}"
										knob-data="{{car.speed}}" class="m-r-sm" data-skin="tron"
										data-fgColor="#1AB394"
										data-width="85"
										data-height="85"
										data-thickness="0.1"
										data-max="260"
										data-angleOffset=-125
										data-angleArc=250
										knob-options=""></knob>

						</div>
						<div class="col-sm-4 text-center" >
							<knob id="{{car.id + '_fuel'}}"
										knob-data="{{car.fuelLevel}}" class="m-r-sm" data-skin="tron"
										data-fgColor="#00AC23"
										data-width="85"
										data-height="85"
										data-thickness="0.1"
										data-angleOffset=-125 data-angleArc=250
										knob-options=""></knob>
						</div>
						<div class="col-sm-4 text-center">
							<knob
									id="{{car.id + '_milage'}}"
									knob-data="{{car.milage}}" class="m-r-sm" data-skin="tron"
									data-fgColor="#00AC23"
									data-width="85"
									data-height="85"
									data-thickness="0.1"
									data-readOnly="true"
									data-max="{{car.milage}}"
									data-angleOffset=-125 data-angleArc=250
									knob-options=""></knob>
						</div>

					</div>

					<div class="row">
						<div class="col-sm-4 col-xs-4 text-center"><strong>Speed</strong></div>
						<div class="col-sm-4 col-xs-4 text-center"><strong>Remaining Milage</strong></div>
						<div class="col-sm-4 col-xs-4 text-center"><strong>Fuel Level</strong></div>
					</div>

				</div>
			</div>
		</div>
	</div>-->


	<div class="col-lg-12">
		<div class="ibox">
			<div class="ibox-title"><strong>Map View of Active Cars</strong></div>
			<div class="ibox-content">
				<div class="row">
					<div class="col-sm-12 col-lg-12 col-md-12">
						<div id="worldMap" style="height: 500px;"></div>
					</div>
				</div>
				<div class="row" style="margin-top: 20px;">
					<div class="col-xs-12"><h3>Geo Fence Configuration</h3></div>
				</div>
				<div class="row">
					<div class="col-sm-2">
						Show Inactive Cars
					</div>
					<div class="col-sm-10">
						<label class="switch">
							<input class="form-control" type="checkbox" ng-model="showInactive"/>
							<i></i>
						</label>
					</div>
				</div>
				<div class="row" style="margin-top: 10px">
					<div class="col-sm-2">
						Show Loyalty Fences
					</div>
					<div class="col-sm-10">
						<label class="switch">
							<input class="form-control" type="checkbox" ng-model="showLoyalty"/>
							<i></i>
						</label>
					</div>
				</div>

				<div class="row" style="margin-top: 10px">
					<div class="col-sm-12">
						<h4>Custom Geofences</h4>
					</div>
				</div>

				<div class="row">

					<div class="col-sm-12">
						<form class="form-inline" role="form">

							<div class="form-group">
								<label for="name" class="control-label sr-only">Name</label>
								<input id="name" placeholder="Name for Geofence" ng-model="geoFenceName" class="form-control input-sm"/>
							</div>

							<div class="form-group">
								<label for="diameter" class="control-label sr-only">Radius</label>
								<input id="diameter" placeholder="Enter Diameter" ng-model="diameter" class="form-control input-sm"/>
							</div>

							<input colorpicker type="text" ng-model="geoFenceColor" placeholder="Color"
										 class="form-control input-sm"/>

							<div class="form-group">
								<button class="pull-right btn btn-primary btn-sm" ng-click="setupGeoFence()">Setup Geo
									Fence</button>
							</div>

						</form>
					</div>

				</div>

				<div class="row" style="margin-top: 10px">
					<div class="col-sm-12">
						<table class="table table-bordered table-hover">
							<thead>
							<tr>
								<!--<th>Image</th>-->
								<th>ID</th>
								<th>Name</th>
								<th>Center</th>
								<th>Diameter</th>
								<th>Associated Vouchers</th>
								<th>Cars in Range</th>
								<th class="text-center">Color</th>
								<th class="text-center">Remove</th>
							</tr>
							</thead>
							<tr ng-repeat="geoFence in geoFences">
								<td>
									{{geoFence.id}}
								</td>
								<td>
									{{geoFence.name}}
								</td>
								<td>
									{{geoFence.config.center.latitude}}, {{geoFence.config.center.longitude}}
								</td>
								<td>
									{{geoFence.config.diameter}}
								</td>

								<td>
									{{geoFence.vouchers}}
								</td>
								<td>
									{{carsInFence(geoFence)}}
								</td>
								<td class="text-center">
									<span style="background-color: {{geoFence.config.color}}">
										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									</span>
								</td>
								<td class="text-center">
									<button class="btn btn-xs btn-warning" ng-click="removeGeoFence(geoFence)"><span
											class="fa fa-remove"></span> Clear
									</button>
								</td>
							</tr>
						</table>
					</div>
				</div>




			</div>
		</div>
	</div>
</div>


</body>
</html>
