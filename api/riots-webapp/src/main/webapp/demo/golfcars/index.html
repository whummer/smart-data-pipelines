<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html ng-app="demo">
<head>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css"/>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.js"></script>
	<script type="text/javascript" src="/demo/golfcars/main.js"></script>

	<!-- riots API dependencies -->
	<script>
	window.RIOTS_USER_ID = "54a27a67bee8810463174a97";
	window.RIOTS_APP_KEY = "510dff4a-7a74-4759-bad3-b7cdfa45a6f2";
	</script>
	<script type="text/javascript" src="/config.js"></script>
	<script type="text/javascript" src="/scripts/modules/service-calls.js"></script>
	<script type="text/javascript" src="/api/riots-api.js"></script>

</head>
<body>
	<div class="container" ng-controller="MainCtrl">
		<div style="height: 200px; width: 100%; background-image: linear-gradient(to bottom, rgba(255,0,0,0), rgba(255,255,255,1)), url(/demo/golfcars/carfleet.jpg); background-size: 100%;">
		</div>
		<p></p>
        <div class="panel panel-default">

            <div class="panel-heading">
                <h2 class="panel-title">
                	<span class="glyphicon glyphicon-edit"></span>
                	<b>Fleet Management</b>
                </h2>
            </div>
            <div class="panel-body">

				<h2>Configuration:</h2>
				
				<table><tr>
					<td>RIOTS_USER_ID</td>
					<td> = </td>
					<td><input ng-model="RIOTS_USER_ID" class="form-control"/></td>
				</tr>
				<tr>
					<td>RIOTS_APP_KEY</td>
					<td> = </td>
					<td><input ng-model="RIOTS_APP_KEY" class="form-control"/></td>
				</tr>
				</table>

				<h2>Available cars:</h2>
				<button class="btn btn-primary" ng-click="loadThings()">Reload Things</button>
				<table class="table table-bordered table-hover">
				<thead><tr>
					<th>Image</th>
					<th>Name</th>
					<th>Location</th>
					<th>Battery Level</th>
					<th>Tire Pressure</th>
					<th>Within Geo Fence</th>
				</tr></thead>
				<tr ng-repeat="thing in things">
					<td><img ng-src="{{thing.img}}" style="height: 30px;"/></td>
					<td><a href="http://platform.riots.io:8080/#/world/{{thing.id}}">{{thing.name}}</a></td>
					<td>{{thing.properties['location.latitude']}},{{thing.properties['location.longitude']}}</td>
					<td>{{thing.properties.batteryPercent}} %</td>
					<td>{{thing.properties.pressure}} %</td>
					<td>{{thing.properties.isInCurrentGeoFence}}</td>
				</tr>
				</table>

				<h2>Geo Fence:</h2>
				<div>
					<table><tr>
						<td>Center (lat/lon):</td>
						<td><input ng-model="geoFence.center.latitude" disabled="disabled"
							 class="form-control" style="width: 100px; clear: none;"/></td>
						<td>,</td>
						<td><input ng-model="geoFence.center.longitude" disabled="disabled"
							 class="form-control" style="width: 100px; clear: none;"/></td>
					</tr>
					<tr>
						<td>Radius:</td>
						<td><input ng-model="diameter" class="form-control" style="width: 100px;"/></td>
						<td></td>
						<td>meters</td>
					</tr>
					</table>
				</div>
				<button class="btn btn-primary" ng-click="setupGeoFence()">Setup Geo Fence</button>

				<h2>Map View:</h2>
				<div id="worldMap" style="height: 300px;"></div>
            </div>
        </div>
   </div>
</body>
</html>