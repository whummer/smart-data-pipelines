<section ng-controller="StatsOverviewController" id="homeHistoryDiv">
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="panel-title"><span class="glyphicon glyphicon-info-sign"></span> <b>Statistics</b>
                <span ng-click="removeWidget('stats')" class="pull-right glyphicon glyphicon-remove"></span>
            </div>
        </div>
        <div class="panel-body">

            <table class="table table-striped">
                <tr>
                    <td>Device Types:</td>
                    <td><span class="badge">{{stats.numDeviceTypes}}</span></td>
                </tr>
                <tr>
                    <td>Device Type Properties:</td>
                    <td><span class="badge">{{stats.numDeviceTypeProperties}}</span></td>
                </tr>
                <tr>
                    <td>Device Instances:</td>
                    <td><span class="badge">{{stats.numDevices}}</span></td>
                </tr>
                <tr>
                    <td>Registered Users:</td>
                    <td><span class="badge">{{stats.numUsers}}</span></td>
                </tr>
                <tr>
                    <td>Online Users:</td>
                    <td><span class="badge">{{stats.numUsersOnline}}</span></td>
                </tr>
                <tr>
                    <td>Processed data points:</td>
                    <td><span class="badge">{{stats.numDataPoints}}</span></td>
                </tr>
            </table>
        </div>
    </div>
</section>

<script>

    var app = angular.module("app");
    app.controller('StatsOverviewController', [
        '$scope', '$http', '$compile',
        function ($scope, $http, $compile) {

            AppController($scope, $http, $compile);

            $scope.retrieveStats = function () {
                invokeGET($scope.http, $scope.statsAPI,
                        function (data, status, headers, config) {
                            $scope.stats = data.result;
                        }
                );
            };

            $scope.retrieveStats();
        }
    ]);

</script>
