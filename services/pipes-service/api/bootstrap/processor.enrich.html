<script type="text/x-red" data-template-name="enrich">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-file"></i> <span data-i18n="enrich.label.name"></span></label>
        <input type="text" id="node-input-name" data-i18n="[placeholder]enrich.label.name">
    </div>
    <div class="form-row">
        <label for="node-input-url"><i class="fa fa-file"></i> <span data-i18n="enrich.label.url"></span></label>
        <input type="text" id="node-input-url" data-i18n="[placeholder]enrich.label.url">
    </div>
    <div class="form-row">
        <label for="node-input-sourceID"><i class="fa fa-file"></i> <span data-i18n="enrich.label.sourceID"></span></label>
        <input type="text" id="node-input-sourceID" data-i18n="[placeholder]enrich.label.sourceID">
    </div>
    <div class="form-row">
        <label for="node-input-targetID"><i class="fa fa-file"></i> <span data-i18n="enrich.label.targetID"></span></label>
        <input type="text" id="node-input-targetID" data-i18n="[placeholder]enrich.label.targetID">
    </div>
    <div class="form-row">
        <label for="node-input-columns"><i class="fa fa-file"></i> <span data-i18n="enrich.label.columns"></span></label>
        <input type="text" id="node-input-columns" data-i18n="[placeholder]enrich.placeholder.columns">
    </div>
    <div class="form-row">
        <label for="node-input-mappings"><i class="fa fa-file"></i> <span data-i18n="enrich.label.mappings"></span></label>
        <input type="text" id="node-input-mappings" data-i18n="[placeholder]enrich.label.mappings">
    </div>
    <div class="form-row">
        <label for="node-input-cache"><i class="fa fa-file"></i> <span data-i18n="enrich.label.cache"></span></label>
        <input type="number" id="node-input-cache" data-i18n="[placeholder]enrich.label.cache">
    </div>
    <div class="form-row">
        <label for="node-input-overwrite"><i class="fa fa-file"></i> <span data-i18n="enrich.label.overwrite"></span></label>
        <input type="text" id="node-input-overwrite" data-i18n="[placeholder]enrich.label.overwrite">
    </div>
    <div class="form-row">
        <label for="node-input-flat"><i class="fa fa-file"></i> <span data-i18n="enrich.label.flat"></span></label>
        <span><input type="checkbox" id="node-input-flat" /> <span data-i18n="[html]enrich.description.flat"></span>
    </div>
    <div class="form-tips" id="spawnTip"><span data-i18n="[html]enrich.tip"></span></div>
</script>

<script type="text/x-red" data-help-name="enrich">
    <p>enrich a payload</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType('enrich',{
        category: 'function',
        color: "aliceblue",
        defaults: {
			"name": {value:""},
			"url": {value:"", required:true},
			"sourceID": {value:"", required:true},
			"targetID": {value:"", required:true},
			"mappings": {value:"", required:true},
			"columns": {value:""},
			"cache": {value: -1},
			"overwrite": {value: true},
			"flat": {value: true}
		},
        inputs: 1,
        outputs: 1,
        icon: "inject.png",
        align: "right",
        label: function() {
			return this.name || ("Enricher: " + trim(this.url, 25));
        },
        labelStyle: function() {
            return this.url?"node_label_italic":"";
        }
    });
</script>

<script type="text/javascript">
	var locales = {
			"enrich.label.name": "Name",
			"enrich.label.url": "URL",
			"enrich.label.cache": "Cache Seconds",
			"enrich.label.overwrite": "Overwrite",
			"enrich.label.flat": "Flat",
			"enrich.label.columns": "Custom Columns",
			"enrich.label.sourceID": "sourceID",
			"enrich.label.targetID": "targetID",
			"enrich.label.mappings": "Mappings",
			"enrich.description.flat": "Insert the values as direct children of the message root.",
			"enrich.tip": "Enriches a message with values from an external CSV file. By default, " + 
				"the values are inserted as direct children of the message root. To insert the values " +
				"under a new field <tt>_entry</tt>, deactivate the <tt>flat</tt> property.",
			"enrich.placeholder.columns": "Comma-separated list of names"
	};
	i18n.addResources('en-US', 'node-red', locales);
</script>
